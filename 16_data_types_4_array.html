<html>

<head>
    <script>
        function test_isArray() {
            console.log('--- test_isArray ---');
            let x;

            x = ['1', '2'];
            console.log(x + ': ' + Array.isArray(x)); // true

            x = [];
            console.log(x + ': ' + Array.isArray(x)); // true

            x = null;
            console.log(x + ': ' + Array.isArray(x)); // false
        }

        function test_loop_array() {
            console.log('--- test_loop_array ---');

            // loop case 1
            let myStringArray = ["Hello", "World"];
            let arrayLength = myStringArray.length;
            for (let i = 0; i < arrayLength; i++) {
                console.log(myStringArray[i]);
            }

            // loop case 2
            x = [{key: 1}, {key: 2}, {KEY: 3}];
            x.forEach(function (item, index, array) {
                console.log(item, index);
                if (item.key != undefined) {
                    console.log(item.key);
                }
            });

            // loop case 3
            let colors = ['red', 'green', 'blue'];
            for (const color of colors) {
                console.log(color);
            }

            // loop abnormal case 1
            Array.prototype.foo = "foo!";
            let array = ['a', 'b', 'c'];
            for (let i in array) {
                console.log(array[i]);
            }
        }

        function test_join() {
            console.log('--- test_join ---');

            let x;

            x = ['1'];
            console.log(x.join(',')); // 1

            x = ['1', '2'];
            console.log(x.join(',')); // 1,2
        }

        function test_some() {
            console.log('--- test_some ---');
            let x;
            let evenValue;

            // Case 1
            x = [1, 2, 3, 4, 5];
            evenValue = undefined;
            x.some(function (item) {
                if (item % 2 === 0) {
                    evenValue = item;
                    return true;
                }
                return false;
            });

            console.log('evenValue：' + evenValue); // 2

            // Case 2
            x = [1, 3, 5];
            evenValue = undefined;
            x.some(function (item) {
                if (item % 2 === 0) {
                    evenValue = item;
                    return true;
                }
                return false;
            });

            console.log('evenValue：' + evenValue); // undefined
        }

        function test_reduce() {
            console.log('--- test_reduce ---');
            let x;
            let output;

            // Case 1
            x = [1, 2, 3, 4];
            output = x.reduce((accumulator, currentItem) => {
               return accumulator + currentItem;
            });
            console.log(x + "'s sum is: " + output);

            // Case 2
            x = [1, 2, 3, 4];
            let initialValue = 5;
            output = x.reduce((accumulator, currentItem) => {
                return accumulator + currentItem;
            }, initialValue);
            console.log(x + "'s sum is: " + output);

            // Case 3
            x = {
                'root': {
                    'level1': {
                        'level2': 'leaf'
                    }
                }
            };
            let keyPath = 'root.level1.level2';
            output = keyPath.split('.').reduce((accumulator, currentScript) => {
                return accumulator[currentScript];
            }, x);
            console.log(keyPath + "'s value is: " + output);
        }

        test_isArray();
        test_loop_array();
        test_join();
        test_some();
        test_reduce();
    </script>
</head>

</html>